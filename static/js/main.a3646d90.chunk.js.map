{"version":3,"sources":["Searchbar.js","TempScale.js","Wind.js","Display.js","Haiku.js","App.js","index.js"],"names":["Searchbar","initialState","city","country","placeholder","state","handleChange","event","target","name","value","setState","submitInput","console","log","preventDefault","props","handleSubmit","this","errormessage","onSubmit","type","id","required","onChange","maxLength","className","Component","Tempscale","C","F","weatherData","scaleSwitch","units","roundedtemp","Number","temp","toFixed","onClick","Wind","per","windspeed","Display","status","emoji","length","combinedclass","TempScale","description","humidity","Haiku","haiku","text","haikulines","map","line","index","key","author","date","href","App","main","location","a","lat","long","Object","values","fetch","API_KEY","response","json","data","wind","speed","emojikey","WEATHER_KEYS","weather","capDescription","charAt","toUpperCase","slice","sys","getHaiku","newTemp","newSpeed","getUserLocation","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","haikukey","haikusubjectlist","subjects","haikusubject","Math","floor","random","mode","haikuresponse","webpage","re","haikuArray","match","len","singleHaiku","domparser","DOMParser","haikudom","parseFromString","haikutext","querySelector","innerHTML","replace","split","splice","haikumetadata","textContent","haikuauthor","haikudate","ReactDOM","render","document","getElementById"],"mappings":"yRAgEeA,E,4MA7DdC,aAAe,CACdC,KAAM,GACNC,QAAS,GACTC,YAAa,+B,EAGdC,MAAQ,EAAKJ,a,EAEbK,aAAe,SAACC,GAAW,IAAD,EACDA,EAAMC,OAAtBC,EADiB,EACjBA,KAAMC,EADW,EACXA,MACd,EAAKC,SAAL,eACEF,EAAOC,K,EAIVE,YAAc,SAACL,GACdM,QAAQC,IAAIP,GACZM,QAAQC,IAAI,SACZP,EAAMQ,iBACN,EAAKC,MAAMC,aAAa,EAAKZ,OAC7B,EAAKM,SAAS,EAAKV,e,uDAGV,IAAD,EAC6BiB,KAAKb,MAApCH,EADE,EACFA,KAAMC,EADJ,EACIA,QAASC,EADb,EACaA,YACbe,EAAiBD,KAAKF,MAAtBG,aAKR,OAJIA,IACHf,EAAce,GAId,0BAAMC,SAAUF,KAAKN,aACpB,2BACCS,KAAK,SACLC,GAAG,qBACHb,KAAK,OACLC,MAAOR,EACPqB,UAAQ,EACRnB,YAAaA,EACboB,SAAUN,KAAKZ,eAEhB,2BACCe,KAAK,SACLC,GAAG,UACHb,KAAK,UACLC,MAAOP,EACPsB,UAAU,IACVrB,YAAY,KACZoB,SAAUN,KAAKZ,eAEhB,2BACCe,KAAK,SACLX,MAAM,SACNY,GAAG,SACHI,UAAU,sB,GAvDSC,aCgBTC,E,uKAfJ,IAGLC,EAAGC,EAHC,EACoCZ,KAAKF,MAAzCe,EADA,EACAA,YAAaC,EADb,EACaA,YAAaC,EAD1B,EAC0BA,MAC9BC,GAAeC,OAAOJ,EAAYK,MAAMC,QAAQ,GASpD,MAPc,aAAVJ,GACHJ,EAAE,SACFC,EAAE,SAEFD,EAAE,OACFC,EAAE,UAEI,yBAAKR,GAAG,OAAOgB,QAASN,GAAcE,EAAtC,IAAmD,0BAAMR,UAAWG,GAAjB,SAA6B,0BAAMH,UAAU,UAAhB,OAAmC,0BAAMA,UAAWI,GAAjB,c,GAZpGH,aCoBTY,E,uKAnBJ,IAILC,EAJI,EAC6BtB,KAAKF,MAA5Be,EADN,EACMA,YAAaE,EADnB,EACmBA,MACvBC,GAAeC,OAAOJ,EAAYU,WAAWJ,QAAQ,GAQzD,OAJCG,EADa,aAAVP,EACG,MAEA,OAGN,yBAAKP,UAAU,aAAaJ,GAAG,WAC9B,uBAAGI,UAAU,gBAAb,eACA,2BAAIQ,EAAJ,IAAkBM,Q,GAdHb,aCiDJe,E,uKA9CJ,IAKLC,EALI,EACoCzB,KAAKF,MAAzCe,EADA,EACAA,YAAaC,EADb,EACaA,YAAaC,EAD1B,EAC0BA,MAC9BW,EAAQb,EAAYa,MAAQ,IAK/BD,EADGZ,EAAYtB,KAAKoC,OAAS,EACpB,SAEA,OAGV,IACIC,EAAa,UADM,mBACN,YAA0BH,GAE3C,OACC,yBAAKjB,UAAWoB,EAAexB,GAAG,oBACjC,yBAAKA,GAAG,YACP,uBAAGA,GAAG,QAAQS,EAAYtB,KAA1B,KAAkCsB,EAAY5B,UAE/C,yBAAKmB,GAAG,SACP,2BAAIsB,GACJ,2BAAIA,GACJ,2BAAIA,GACJ,2BAAIA,GACJ,2BAAIA,IAEL,kBAACG,EAAD,CACEhB,YAAaA,EACbE,MAAOA,EACPD,YAAaA,IAEf,yBAAKN,UAAU,aAAaJ,GAAG,kBAC9B,uBAAGI,UAAU,gBAAb,iBACA,uBAAGJ,GAAG,eAAeS,EAAYiB,cAElC,yBAAKtB,UAAU,aAAaJ,GAAG,eAC9B,uBAAGI,UAAU,gBAAb,cACA,uBAAGJ,GAAG,YAAYS,EAAYkB,SAA9B,MAED,kBAAC,EAAD,CAAMlB,YAAaA,EAAaE,MAAOA,S,GAzCrBN,aCiCPuB,E,uKAlCJ,IAGLP,EAFIQ,EAAUjC,KAAKF,MAAfmC,MAIPR,EADGQ,EAAMC,KAAKP,OAAS,EACd,SAEA,OAGV,IAAIQ,EAAaF,EAAMC,KAAKE,KAAI,SAACC,EAAMC,GAAP,OAC/B,uBAAGC,IAAKD,GAAQD,MAEjB,OACC,yBAAK7B,UAAU,mBAAmBJ,GAAG,kBACpC,yBAAKI,UAAWiB,EAAQrB,GAAG,cAC1B,yBAAKA,GAAG,aAAa+B,GACrB,yBAAK/B,GAAG,iBACP,uBAAGA,GAAG,sBAAsB6B,EAAMO,OAAlC,KAA4CP,EAAMQ,MAClD,2BACC,qCACS,IACR,uBAAGC,KAAK,iDAAR,uC,GAvBYjC,aC2OLkC,E,4MArOdxD,MAAQ,CACP0B,YAAa,CACZtB,KAAM,GACNN,QAAS,GACT2D,KAAM,GACNd,YAAa,GACbZ,KAAM,GACNa,SAAU,GACVR,UAAW,GACXG,MAAO,IAERX,MAAO,SACPkB,MAAO,CACNC,KAAM,GACNM,OAAQ,GACRC,KAAM,IAEPxC,aAAc,I,EAGfF,a,uCAAe,WAAO8C,GAAP,mCAAAC,EAAA,yDACR9D,GADQ,EACqB6D,GAA7B7D,KAAMC,EADE,EACFA,QAAS8D,EADP,EACOA,IAAKC,EADZ,EACYA,KAC1BrD,QAAQC,IAAI,gBACZD,QAAQC,IAAIiD,GAEZA,EAAWI,OAAOC,OAAOL,GALX,UAUTE,IAAOC,EAVE,iCAWKG,MAAM,uDAAD,OACkCJ,EADlC,gBAC6CC,EAD7C,kBAC2D,EAAK7D,MAAM4B,MADtE,kBACqFqC,MAZ/F,OAWZC,EAXY,kCAcDpE,EAdC,kCAeKkE,MAAM,qDAAD,OACgCnE,EADhC,kBAC8C,EAAKG,MAAM4B,MADzD,kBACwEqC,MAhBlF,QAeZC,EAfY,gDAmBKF,MAAM,qDAAD,OACgCnE,EADhC,YACwCC,EADxC,kBACyD,EAAKE,MAAM4B,MADpE,kBACmFqC,MApB7F,QAmBZC,EAnBY,gCAuBAA,EAASC,OAvBT,QAuBbC,EAvBa,OA0BY,WAArB,EAAKpE,MAAM4B,QACdwC,EAAKC,KAAKC,MAA2B,GAAlBF,EAAKC,KAAKC,MAAc,EAC3CxD,GAAe,EACf,EAAKR,SAAS,CACbQ,aAAcA,KA9BH,yDAkCbN,QAAQC,IAAR,8BACAD,QAAQC,IAAR,MACAK,EAAe,iBACf,EAAKR,SAAS,CACbQ,aAAcA,IAtCF,2BA4CVyD,EAAWC,EAAaJ,EAAKK,QAAQ,GAAGhB,MACxClB,EAAQgC,EAAShC,MAGjBmC,EACHN,EAAKK,QAAQ,GAAG9B,YAAYgC,OAAO,GAAGC,cACtCR,EAAKK,QAAQ,GAAG9B,YAAYkC,MAAM,GAEnC,EAAKvE,SAAS,CACboB,YAAa,CACZtB,KAAMgE,EAAKhE,KACXN,QAASsE,EAAKU,IAAIhF,QAClB2D,KAAMW,EAAKK,QAAQ,GAAGhB,KACtBd,YAAa+B,EACb3C,KAAMqC,EAAKX,KAAK1B,KAChBa,SAAUwB,EAAKX,KAAKb,SACpBR,UAAWgC,EAAKC,KAAKC,MACrB/B,MAAOA,KAKT,EAAKwC,SAASX,EAAKK,QAAQ,GAAGhB,MAlEhB,0D,wDAsEf9B,YAAc,WAAO,IAEhBqD,EAASC,EAFM,EACU,EAAKjF,MAA5B0B,EADa,EACbA,YAEQ,WAHK,EACAE,OAIlBoD,EAA8B,EAAnBtD,EAAYK,KAAY,EAAI,GACvCL,EAAYK,KAAOiD,EAGnBC,EAAWvD,EAAYU,UAAY,SACnCV,EAAYU,UAAY6C,EAGxB,EAAK3E,SAAS,CACboB,YAAaA,EACbE,MAAO,eAIRoD,EAAqC,GAAzBtD,EAAYK,KAAO,IAAW,EAC1CL,EAAYK,KAAOiD,EAGnBC,EAAmC,SAAxBvD,EAAYU,UACvBV,EAAYU,UAAY6C,EAGxB,EAAK3E,SAAS,CACboB,YAAaA,EACbE,MAAO,a,EAMVsD,gBAAkB,WACjBC,UAAUC,YAAYC,oBAAmB,SAACC,GACzC,IAAIC,EAAS,CACZ3B,IAAK0B,EAASC,OAAOC,SACrB3B,KAAMyB,EAASC,OAAOE,WAEvB,EAAK7E,aAAa2E,O,gGAILG,G,8GAEdC,GADIA,EAAmBnB,EAAakB,IACAE,SAChCC,EACHF,EACCG,KAAKC,MAAMD,KAAKE,SAAWL,EAAiBnD,S,kBAKnBwB,MAAM,2FAAD,OAC6D6B,EAD7D,SAE9B,CACCI,KAAM,S,cAHJC,E,gBAMYA,EAAcnD,O,OAA9BoD,E,gEAEA3F,QAAQC,IAAR,kCACAD,QAAQC,IAAR,M,2BAIG2F,EAAK,6BACLC,EAAaF,EAAQG,MAAMF,GAC3BG,EAAMF,EAAW7D,OACjBgE,EAAcH,EAAWP,KAAKC,MAAMD,KAAKE,SAAWO,IAGpDE,EAAY,IAAIC,UAChBC,EAAWF,EAAUG,gBAAgBJ,EAAa,cAKtDK,GADAA,GADAA,GADAA,GADIA,EAAYF,EAASG,cAAc,WACjBC,WACAC,QAAQ,MAAO,MACfA,QAAQ,MAAO,MACfC,MAAM,SAGdzE,OAAS,GACtBqE,EAAUK,OAAO,GAKlBC,GADIA,EAAgBR,EAASG,cAAc,eACbM,YAC1BC,EAAcF,EAAcb,MAAM,aAClCgB,EAAYH,EAAcH,QAAQ,eAAgB,M,EAEzBnG,KAAKb,MAA5B0B,E,EAAAA,YAAaE,E,EAAAA,MACnBf,KAAKP,SAAS,CACboB,YAAaA,EACbE,MAAOA,EACPkB,MAAO,CACNC,KAAM8D,EACNxD,OAAQgE,EACR/D,KAAMgE,K,gJAKC,IAAD,EAC4CzG,KAAKb,MAAjD0B,EADA,EACAA,YAAaE,EADb,EACaA,MAAOkB,EADpB,EACoBA,MAAOhC,EAD3B,EAC2BA,aACnC,OACC,yBAAKO,UAAU,OACd,yBAAKJ,GAAG,mBACP,2BACCD,KAAK,SACLiB,QAASpB,KAAKqE,gBACd7D,UAAU,eACVJ,GAAG,iBACHZ,MAAM,SAEP,kBAAC,EAAD,CACCS,aAAcA,EACdF,aAAcC,KAAKD,gBAGrB,yBAAKK,GAAG,oBACP,kBAAC,EAAD,CACCU,YAAad,KAAKc,YAClBC,MAAOA,EACPF,YAAaA,IAEd,kBAAC,EAAD,CAAOoB,MAAOA,KAEf,yBAAK7B,GAAG,UAAR,uBACsB,IACrB,uBAAGsC,KAAK,sCAAR,iB,GA/NajC,aCFlBiG,IAASC,OACP,kBAAC,EAAD,MACAC,SAASC,eAAe,U","file":"static/js/main.a3646d90.chunk.js","sourcesContent":["import React, { Component } from \"react\";\n\nclass Searchbar extends Component {\n\tinitialState = {\n\t\tcity: \"\",\n\t\tcountry: \"\",\n\t\tplaceholder: \"London (city name required)\"\n\t};\n\n\tstate = this.initialState;\n\n\thandleChange = (event) => {\n\t\tconst { name, value } = event.target;\n\t\tthis.setState({\n\t\t\t[name]: value,\n\t\t});\n\t};\n\n\tsubmitInput = (event) => {\n\t\tconsole.log(event)\n\t\tconsole.log(\"event\")\n\t\tevent.preventDefault();\n\t\tthis.props.handleSubmit(this.state);\n\t\tthis.setState(this.initialState);\n\t};\n\n\trender() {\n\t\tlet { city, country, placeholder } = this.state\n\t\tconst { errormessage } = this.props\n\t\tif (errormessage) {\n\t\t\tplaceholder = errormessage\n\t\t}\n\n\t\treturn (\n\t\t\t<form onSubmit={this.submitInput}>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\tid=\"weather-api-search\"\n\t\t\t\t\tname=\"city\"\n\t\t\t\t\tvalue={city}\n\t\t\t\t\trequired\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\tid=\"country\"\n\t\t\t\t\tname=\"country\"\n\t\t\t\t\tvalue={country}\n\t\t\t\t\tmaxLength=\"2\"\n\t\t\t\t\tplaceholder=\"GB\"\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tvalue=\"Submit\"\n\t\t\t\t\tid='submit'\n\t\t\t\t\tclassName='searchbutton'\n\t\t\t\t/>\n\t\t\t</form>\n\t\t);\n\t}\n}\n\nexport default Searchbar;\n","import React, { Component } from \"react\";\n\nclass Tempscale extends Component {\n\trender() {\n\t\tconst { weatherData, scaleSwitch, units } = this.props;\n\t\tlet roundedtemp = +Number(weatherData.temp).toFixed(2)\n\t\tlet C, F;\n\t\tif (units === \"imperial\") {\n\t\t\tC=\"greyed\"\n\t\t\tF=\"fine\"\n\t\t} else {\n\t\t\tC=\"fine\"\n\t\t\tF=\"greyed\"\n\t\t}\n\t\treturn <div id=\"temp\" onClick={scaleSwitch}>{roundedtemp} <span className={C}>ºC</span><span className='greyed'> / </span><span className={F}>ºF</span></div>;\n\t}\n}\n\nexport default Tempscale;\n","import React, { Component } from \"react\";\n\nclass Wind extends Component {\n\trender() {\n        const { weatherData, units } = this.props;\n\t\tlet roundedtemp = +Number(weatherData.windspeed).toFixed(2)\n        \n\t\tlet per;\n\t\tif (units === \"imperial\") {\n\t\t\tper = \"mph\";\n\t\t} else {\n\t\t\tper = \"km/h\";\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"weatherdiv\" id=\"winddiv\">\n\t\t\t\t<p className=\"weatherlabel\">Wind speed:</p>\n\t\t\t\t<p>{roundedtemp} {per}</p>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Wind;\n","import React, { Component } from \"react\";\nimport TempScale from \"./TempScale\";\nimport Wind from \"./Wind\";\n\nclass Display extends Component {\n\trender() {\n\t\tconst { weatherData, scaleSwitch, units } = this.props;\n\t\tlet emoji = weatherData.emoji + \" \"\n\t\t// emoji = emoji.repeat(10)\n\n\t\tlet status\n\t\tif (weatherData.name.length > 0) {\n\t\t\tstatus = \"reveal\"\n\t\t} else {\n\t\t\tstatus = \"hide\"\n\t\t}\n\n\t\tlet contentcontainer = \"contentcontainer\"\n\t\tlet combinedclass = `${contentcontainer} ${status}`\n\n\t\treturn (\n\t\t\t<div className={combinedclass} id=\"weathercontainer\">\n\t\t\t\t<div id=\"location\">\n\t\t\t\t\t<p id=\"main\">{weatherData.name}, {weatherData.country}</p>\n\t\t\t\t</div>\n\t\t\t\t<div id='emoji'>\n\t\t\t\t\t<p>{emoji}</p>\n\t\t\t\t\t<p>{emoji}</p>\n\t\t\t\t\t<p>{emoji}</p>\n\t\t\t\t\t<p>{emoji}</p>\n\t\t\t\t\t<p>{emoji}</p>\n\t\t\t\t</div>\n\t\t\t\t<TempScale\n\t\t\t\t\t\tweatherData={weatherData}\n\t\t\t\t\t\tunits={units}\n\t\t\t\t\t\tscaleSwitch={scaleSwitch}\n\t\t\t\t/>\n\t\t\t\t<div className=\"weatherdiv\" id=\"descriptiondiv\">\n\t\t\t\t\t<p className=\"weatherlabel\">Description: </p>\n\t\t\t\t\t<p id=\"description\">{weatherData.description}</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"weatherdiv\" id=\"humiditydiv\">\n\t\t\t\t\t<p className=\"weatherlabel\">Humidity: </p>\n\t\t\t\t\t<p id=\"humidity\">{weatherData.humidity}%</p>\n\t\t\t\t</div>\n\t\t\t\t<Wind weatherData={weatherData} units={units} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Display;\n","import React, { Component } from \"react\";\n\nclass Haiku extends Component {\n\trender() {\n\t\tconst { haiku } = this.props;\n\n\t\tlet status\n\t\tif (haiku.text.length > 0) {\n\t\t\tstatus = \"reveal\"\n\t\t} else {\n\t\t\tstatus = \"hide\"\n\t\t}\n\n\t\tlet haikulines = haiku.text.map((line, index) => (\n\t\t\t<p key={index}>{line}</p>\n\t\t));\n\t\treturn (\n\t\t\t<div className=\"contentcontainer\" id=\"haikucontainer\">\n\t\t\t\t<div className={status} id='bonushaiku'>\n\t\t\t\t\t<div id=\"haikutext\">{haikulines}</div>\n\t\t\t\t\t<div id=\"haikumetadata\">\n\t\t\t\t\t\t<p id=\"haikuauthoranddate\">{haiku.author}, {haiku.date}</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<i>\n\t\t\t\t\t\t\t\tvia the{\" \"}\n\t\t\t\t\t\t\t\t<a href=\"https://www.tempslibres.org/tl/en/dbhk00.html\">\n\t\t\t\t\t\t\t\t\ttempslibres haiku database\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Haiku;\n","import React, { Component } from \"react\";\nimport { API_KEY } from \"./keys.json\";\nimport WEATHER_KEYS from \"./weatherkeys.json\";\nimport Searchbar from \"./Searchbar\";\nimport Display from \"./Display\";\nimport Haiku from \"./Haiku\";\n\nclass App extends Component {\n\tstate = {\n\t\tweatherData: {\n\t\t\tname: \"\",\n\t\t\tcountry: \"\",\n\t\t\tmain: \"\",\n\t\t\tdescription: \"\",\n\t\t\ttemp: \"\",\n\t\t\thumidity: \"\",\n\t\t\twindspeed: \"\",\n\t\t\temoji: \"\",\n\t\t},\n\t\tunits: \"metric\",\n\t\thaiku: {\n\t\t\ttext: [],\n\t\t\tauthor: \"\",\n\t\t\tdate: \"\",\n\t\t},\n\t\terrormessage: \"\",\n\t};\n\n\thandleSubmit = async (location) => {\n\t\tlet { city, country, lat, long } = location;\n\t\tconsole.log('handlesubmit')\n\t\tconsole.log(location)\n\t\t// get the value from the object\n\t\tlocation = Object.values(location);\n\n\t\t// snag our weather data\n\t\tlet response, data, errormessage;\n\t\ttry {\n\t\t\tif (lat && long) {\n\t\t\t\tresponse = await fetch(\n\t\t\t\t\t`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${long}&units=${this.state.units}&appid=${API_KEY}`\n\t\t\t\t);\n\t\t\t} else if (!country) {\n\t\t\t\tresponse = await fetch(\n\t\t\t\t\t`https://api.openweathermap.org/data/2.5/weather?q=${city}&units=${this.state.units}&appid=${API_KEY}`\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tresponse = await fetch(\n\t\t\t\t\t`https://api.openweathermap.org/data/2.5/weather?q=${city},${country}&units=${this.state.units}&appid=${API_KEY}`\n\t\t\t\t);\n\t\t\t}\n\t\t\tdata = await response.json();\n\n\t\t\t// if celsius, convert from m/s to km/h\n\t\t\tif (this.state.units === \"metric\") {\n\t\t\t\tdata.wind.speed = (data.wind.speed * 18) / 5;\n\t\t\t\terrormessage = false;\n\t\t\t\tthis.setState({\n\t\t\t\t\terrormessage: errormessage,\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(`Can't find that there city`);\n\t\t\tconsole.log(error);\n\t\t\terrormessage = \"City not found\";\n\t\t\tthis.setState({\n\t\t\t\terrormessage: errormessage,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\t// get emoji\n\t\tlet emojikey = WEATHER_KEYS[data.weather[0].main];\n\t\tlet emoji = emojikey.emoji;\n\n\t\t// capitalize description\n\t\tlet capDescription =\n\t\t\tdata.weather[0].description.charAt(0).toUpperCase() +\n\t\t\tdata.weather[0].description.slice(1);\n\n\t\tthis.setState({\n\t\t\tweatherData: {\n\t\t\t\tname: data.name,\n\t\t\t\tcountry: data.sys.country,\n\t\t\t\tmain: data.weather[0].main,\n\t\t\t\tdescription: capDescription,\n\t\t\t\ttemp: data.main.temp,\n\t\t\t\thumidity: data.main.humidity,\n\t\t\t\twindspeed: data.wind.speed,\n\t\t\t\temoji: emoji,\n\t\t\t},\n\t\t});\n\n\t\t// haiku stuff\n\t\tthis.getHaiku(data.weather[0].main);\n\t};\n\n\t// switch temp and wind scales\n\tscaleSwitch = () => {\n\t\tlet { weatherData, units } = this.state;\n\t\tlet newTemp, newSpeed;\n\t\tif (units === \"metric\") {\n\t\t\t// temp\n\t\t\tnewTemp = (weatherData.temp * 9) / 5 + 32;\n\t\t\tweatherData.temp = newTemp;\n\n\t\t\t// wind\n\t\t\tnewSpeed = weatherData.windspeed / 1.609344;\n\t\t\tweatherData.windspeed = newSpeed;\n\n\t\t\t// set\n\t\t\tthis.setState({\n\t\t\t\tweatherData: weatherData,\n\t\t\t\tunits: \"imperial\",\n\t\t\t});\n\t\t} else {\n\t\t\t// temp\n\t\t\tnewTemp = ((weatherData.temp - 32) * 5) / 9;\n\t\t\tweatherData.temp = newTemp;\n\n\t\t\t// wind\n\t\t\tnewSpeed = weatherData.windspeed * 1.609344;\n\t\t\tweatherData.windspeed = newSpeed;\n\n\t\t\t// set\n\t\t\tthis.setState({\n\t\t\t\tweatherData: weatherData,\n\t\t\t\tunits: \"metric\",\n\t\t\t});\n\t\t}\n\t};\n\n\t// display user's location\n\tgetUserLocation = () => {\n\t\tnavigator.geolocation.getCurrentPosition((position) => {\n\t\t\tlet coords = {\n\t\t\t\tlat: position.coords.latitude,\n\t\t\t\tlong: position.coords.longitude,\n\t\t\t};\n\t\t\tthis.handleSubmit(coords);\n\t\t});\n\t};\n\n\tasync getHaiku(haikukey) {\n\t\tlet haikusubjectlist = WEATHER_KEYS[haikukey];\n\t\thaikusubjectlist = haikusubjectlist.subjects;\n\t\tlet haikusubject =\n\t\t\thaikusubjectlist[\n\t\t\t\tMath.floor(Math.random() * haikusubjectlist.length)\n\t\t\t];\n\n\t\tlet webpage;\n\t\ttry {\n\t\t\tlet haikuresponse = await fetch(\n\t\t\t\t`https://cors-anywhere.herokuapp.com/https://www.tempslibres.org/tl/tlphp/dbhk02.php?mot=${haikusubject}&lg=e`,\n\t\t\t\t{\n\t\t\t\t\tmode: \"cors\",\n\t\t\t\t}\n\t\t\t);\n\t\t\twebpage = await haikuresponse.text();\n\t\t} catch (error) {\n\t\t\tconsole.log(`P sure we didn't get the haiku`);\n\t\t\tconsole.log(error);\n\t\t\treturn;\n\t\t}\n\n\t\tlet re = /<div class.*?<\\/div>/gs;\n\t\tlet haikuArray = webpage.match(re);\n\t\tlet len = haikuArray.length;\n\t\tlet singleHaiku = haikuArray[Math.floor(Math.random() * len)];\n\n\t\t// pull out the haiku data, snag the haiku's text.\n\t\tlet domparser = new DOMParser();\n\t\tlet haikudom = domparser.parseFromString(singleHaiku, \"text/html\");\n\t\tlet haikutext = haikudom.querySelector(\".haiku\");\n\t\thaikutext = haikutext.innerHTML;\n\t\thaikutext = haikutext.replace(\"&lt\", \"<\");\n\t\thaikutext = haikutext.replace(\"&gt\", \">\");\n\t\thaikutext = haikutext.split(\"<br>\");\n\n\t\t// reduce length\n\t\tif (haikutext.length > 3) {\n\t\t\thaikutext.splice(3);\n\t\t}\n\n\t\t// snag the author and date\n\t\tlet haikumetadata = haikudom.querySelector(\".dbhktlref\");\n\t\thaikumetadata = haikumetadata.textContent;\n\t\tlet haikuauthor = haikumetadata.match(/^.*(?= ,)/);\n\t\tlet haikudate = haikumetadata.replace(/(.*cco )(.*)/, \"$2\");\n\n\t\tlet { weatherData, units } = this.state;\n\t\tthis.setState({\n\t\t\tweatherData: weatherData,\n\t\t\tunits: units,\n\t\t\thaiku: {\n\t\t\t\ttext: haikutext,\n\t\t\t\tauthor: haikuauthor,\n\t\t\t\tdate: haikudate,\n\t\t\t},\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { weatherData, units, haiku, errormessage } = this.state;\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t<div id=\"searchcontainer\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={this.getUserLocation}\n\t\t\t\t\t\tclassName=\"searchbutton\"\n\t\t\t\t\t\tid=\"locationbutton\"\n\t\t\t\t\t\tvalue=\"Here\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Searchbar\n\t\t\t\t\t\terrormessage={errormessage}\n\t\t\t\t\t\thandleSubmit={this.handleSubmit}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"displaycontainer\">\n\t\t\t\t\t<Display\n\t\t\t\t\t\tscaleSwitch={this.scaleSwitch}\n\t\t\t\t\t\tunits={units}\n\t\t\t\t\t\tweatherData={weatherData}\n\t\t\t\t\t/>\n\t\t\t\t\t<Haiku haiku={haiku} />\n\t\t\t\t</div>\n\t\t\t\t<div id=\"credit\">\n\t\t\t\t\tBackground image via{\" \"}\n\t\t\t\t\t<a href=\"https://www.reddit.com/user/Biode/\">u/Biode</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}