(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{12:function(e,t,a){e.exports=a(19)},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),c=a.n(i),s=(a(17),a(5)),o=a.n(s),u=a(7),l=a(1),m=a(2),h=a(4),d=a(3),p=a(6),b=a(8),w=a(11),v=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).initialState={city:"",country:"",placeholder:"London (city name required)"},e.state=e.initialState,e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(w.a)({},n,r))},e.submitInput=function(t){console.log(t),console.log("event"),t.preventDefault(),e.props.handleSubmit(e.state),e.setState(e.initialState)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.city,a=e.country,n=e.placeholder,i=this.props.errormessage;return i&&(n=i),r.a.createElement("form",{onSubmit:this.submitInput},r.a.createElement("input",{type:"search",id:"weather-api-search",name:"city",value:t,required:!0,placeholder:n,onChange:this.handleChange}),r.a.createElement("input",{type:"search",id:"country",name:"country",value:a,maxLength:"2",placeholder:"GB",onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Submit",id:"submit",className:"searchbutton"}))}}]),a}(n.Component),j=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e,t,a=this.props,n=a.weatherData,i=a.scaleSwitch,c=a.units,s=+Number(n.temp).toFixed(2);return"imperial"===c?(e="greyed",t="fine"):(e="fine",t="greyed"),r.a.createElement("div",{id:"temp",onClick:i},s," ",r.a.createElement("span",{className:e},"\xbaC"),r.a.createElement("span",{className:"greyed"}," / "),r.a.createElement("span",{className:t},"\xbaF"))}}]),a}(n.Component),f=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.weatherData,n=t.units,i=+Number(a.windspeed).toFixed(2);return e="imperial"===n?"mph":"km/h",r.a.createElement("div",{className:"weatherdiv",id:"winddiv"},r.a.createElement("p",{className:"weatherlabel"},"Wind speed:"),r.a.createElement("p",null,i," ",e))}}]),a}(n.Component),g=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.weatherData,n=t.scaleSwitch,i=t.units,c=a.emoji+" ";e=a.name.length>0?"reveal":"hide";var s="".concat("contentcontainer"," ").concat(e);return r.a.createElement("div",{className:s,id:"weathercontainer"},r.a.createElement("div",{id:"location"},r.a.createElement("p",{id:"main"},a.name,", ",a.country)),r.a.createElement("div",{id:"emoji"},r.a.createElement("p",null,c),r.a.createElement("p",null,c),r.a.createElement("p",null,c),r.a.createElement("p",null,c),r.a.createElement("p",null,c)),r.a.createElement(j,{weatherData:a,units:i,scaleSwitch:n}),r.a.createElement("div",{className:"weatherdiv",id:"descriptiondiv"},r.a.createElement("p",{className:"weatherlabel"},"Description: "),r.a.createElement("p",{id:"description"},a.description)),r.a.createElement("div",{className:"weatherdiv",id:"humiditydiv"},r.a.createElement("p",{className:"weatherlabel"},"Humidity: "),r.a.createElement("p",{id:"humidity"},a.humidity,"%")),r.a.createElement(f,{weatherData:a,units:i}))}}]),a}(n.Component),y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e,t=this.props.haiku;e=t.text.length>0?"reveal":"hide";var a=t.text.map((function(e,t){return r.a.createElement("p",{key:t},e)}));return r.a.createElement("div",{className:"contentcontainer",id:"haikucontainer"},r.a.createElement("div",{className:e,id:"bonushaiku"},r.a.createElement("div",{id:"haikutext"},a),r.a.createElement("div",{id:"haikumetadata"},r.a.createElement("p",{id:"haikuauthoranddate"},t.author,", ",t.date),r.a.createElement("p",null,r.a.createElement("i",null,"via the"," ",r.a.createElement("a",{href:"https://www.tempslibres.org/tl/en/dbhk00.html"},"tempslibres haiku database"))))))}}]),a}(n.Component),E=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={weatherData:{name:"",country:"",main:"",description:"",temp:"",humidity:"",windspeed:"",emoji:""},units:"metric",haiku:{text:[],author:"",date:""},errormessage:""},e.handleSubmit=function(){var t=Object(u.a)(o.a.mark((function t(a){var n,r,i,c,s,u,l,m,h,d,w;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(n=a).city,i=n.country,c=n.lat,s=n.long,console.log("handlesubmit"),console.log(a),a=Object.values(a),t.prev=4,!c||!s){t.next=11;break}return t.next=8,fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(c,"&lon=").concat(s,"&units=").concat(e.state.units,"&appid=").concat(p.a));case 8:u=t.sent,t.next=20;break;case 11:if(i){t.next=17;break}return t.next=14,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(r,"&units=").concat(e.state.units,"&appid=").concat(p.a));case 14:u=t.sent,t.next=20;break;case 17:return t.next=19,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(r,",").concat(i,"&units=").concat(e.state.units,"&appid=").concat(p.a));case 19:u=t.sent;case 20:return t.next=22,u.json();case 22:l=t.sent,"metric"===e.state.units&&(l.wind.speed=18*l.wind.speed/5,m=!1,e.setState({errormessage:m})),t.next=33;break;case 26:return t.prev=26,t.t0=t.catch(4),console.log("Can't find that there city"),console.log(t.t0),m="City not found",e.setState({errormessage:m}),t.abrupt("return");case 33:h=b[l.weather[0].main],d=h.emoji,w=l.weather[0].description.charAt(0).toUpperCase()+l.weather[0].description.slice(1),e.setState({weatherData:{name:l.name,country:l.sys.country,main:l.weather[0].main,description:w,temp:l.main.temp,humidity:l.main.humidity,windspeed:l.wind.speed,emoji:d}}),e.getHaiku(l.weather[0].main);case 38:case"end":return t.stop()}}),t,null,[[4,26]])})));return function(e){return t.apply(this,arguments)}}(),e.scaleSwitch=function(){var t,a,n=e.state,r=n.weatherData;"metric"===n.units?(t=9*r.temp/5+32,r.temp=t,a=r.windspeed/1.609344,r.windspeed=a,e.setState({weatherData:r,units:"imperial"})):(t=5*(r.temp-32)/9,r.temp=t,a=1.609344*r.windspeed,r.windspeed=a,e.setState({weatherData:r,units:"metric"}))},e.getUserLocation=function(){navigator.geolocation.getCurrentPosition((function(t){var a={lat:t.coords.latitude,long:t.coords.longitude};e.handleSubmit(a)}))},e}return Object(m.a)(a,[{key:"getHaiku",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,r,i,c,s,u,l,m,h,d,p,w,v,j,f,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=b[t]).subjects,n=a[Math.floor(Math.random()*a.length)],e.prev=3,e.next=6,fetch("https://cors-anywhere.herokuapp.com/https://www.tempslibres.org/tl/tlphp/dbhk02.php?mot=".concat(n,"&lg=e"),{mode:"cors"});case 6:return i=e.sent,e.next=9,i.text();case 9:r=e.sent,e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(3),console.log("P sure we didn't get the haiku"),console.log(e.t0),e.abrupt("return");case 17:c=/<div class[\s\S]*?<\/div>/g,s=r.match(c),u=s.length,l=s[Math.floor(Math.random()*u)],m=new DOMParser,h=m.parseFromString(l,"text/html"),(d=(d=(d=(d=(d=h.querySelector(".haiku")).innerHTML).replace("&lt","<")).replace("&gt",">")).split("<br>")).length>3&&d.splice(3),p=(p=h.querySelector(".dbhktlref")).textContent,w=p.match(/^.*(?= ,)/),v=p.replace(/(.*cco )(.*)/,"$2"),j=this.state,f=j.weatherData,g=j.units,this.setState({weatherData:f,units:g,haiku:{text:d,author:w,date:v}});case 35:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.weatherData,a=e.units,n=e.haiku,i=e.errormessage;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"searchcontainer"},r.a.createElement("input",{type:"button",onClick:this.getUserLocation,className:"searchbutton",id:"locationbutton",value:"Here"}),r.a.createElement(v,{errormessage:i,handleSubmit:this.handleSubmit})),r.a.createElement("div",{id:"displaycontainer"},r.a.createElement(g,{scaleSwitch:this.scaleSwitch,units:a,weatherData:t}),r.a.createElement(y,{haiku:n})),r.a.createElement("div",{id:"credit"},"Background image via"," ",r.a.createElement("a",{href:"https://www.reddit.com/user/Biode/"},"u/Biode")))}}]),a}(n.Component);c.a.render(r.a.createElement(E,null),document.getElementById("root"))},6:function(e){e.exports=JSON.parse('{"a":"019a5718a88fbad6d614090cf4f6d59d"}')},8:function(e){e.exports=JSON.parse('{"Thunderstorm":{"subjects":["thunderstorm","thunder","lightning","storm"],"emoji":"\u26c8\ufe0f"},"Drizzle":{"subjects":["drizzle"],"emoji":"\ud83c\udf26\ufe0f"},"Rain":{"subjects":["rain","downpour"],"emoji":"\ud83c\udf27\ufe0f"},"Snow":{"subjects":["snow","winter","blizzard"],"emoji":"\u2744\ufe0f"},"Mist":{"subjects":["mist"],"emoji":"\ud83c\udf2b\ufe0f"},"Smoke":{"subjects":["wildfire"],"emoji":"\ud83d\udeac"},"Haze":{"subjects":["haze"],"emoji":"\ud83c\udf2b\ufe0f"},"Dust":{"subjects":["dust"],"emoji":"\ud83d\udca8"},"Fog":{"subjects":["fog"],"emoji":"\ud83c\udf2b\ufe0f"},"Sand":{"subjects":["sand"],"emoji":"\u231b"},"Ash":{"subjects":["ash"],"emoji":"\ud83d\udca8"},"Squall":{"subjects":["storm"],"emoji":"\ud83c\udf29\ufe0f"},"Tornado":{"subjects":["tornado"],"emoji":"\ud83c\udf2a\ufe0f"},"Clear":{"subjects":["breeze","sun"],"emoji":"\u2600\ufe0f"},"Clouds":{"subjects":["cloud"],"emoji":"\u2601\ufe0f"}}')}},[[12,1,2]]]);
//# sourceMappingURL=main.a3646d90.chunk.js.map