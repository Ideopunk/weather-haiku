(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{14:function(e,t,a){e.exports=a(42)},19:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),c=a.n(i),s=(a(19),a(6)),o=a.n(s),l=a(8),u=a(2),m=a(3),d=a(5),h=a(4),p=a(7),b=a(9),w=a(12),g=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).initialState={city:"",country:"",placeholder:"London (city name required)"},e.state=e.initialState,e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(w.a)({},n,r))},e.submitInput=function(t){console.log(t),console.log("event"),t.preventDefault(),e.props.handleSubmit(e.state),e.setState(e.initialState)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.city,a=e.country,n=e.placeholder,i=this.props.errormessage;return i&&(n=i),r.a.createElement("form",{onSubmit:this.submitInput},r.a.createElement("input",{type:"search",id:"weather-api-search",name:"city",value:t,required:!0,placeholder:n,onChange:this.handleChange}),r.a.createElement("input",{type:"search",id:"country",name:"country",value:a,maxLength:"2",placeholder:"GB",onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Submit",id:"submit",className:"searchbutton"}))}}]),a}(n.Component),v=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e,t,a=this.props,n=a.weatherData,i=a.scaleSwitch,c=a.units,s=+Number(n.temp).toFixed(2);return"imperial"===c?(e="greyed",t="fine"):(e="fine",t="greyed"),r.a.createElement("div",{id:"temp",onClick:i},s," ",r.a.createElement("span",{className:e},"\xbaC"),r.a.createElement("span",{className:"greyed"}," / "),r.a.createElement("span",{className:t},"\xbaF"))}}]),a}(n.Component),f=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.weatherData,n=t.units,i=+Number(a.windspeed).toFixed(2);return e="imperial"===n?"mph":"km/h",r.a.createElement("div",{className:"weatherdiv",id:"winddiv"},r.a.createElement("p",{className:"weatherlabel"},"Wind speed:"),r.a.createElement("p",null,i," ",e))}}]),a}(n.Component),j=a(13),E=a.n(j),y=function(){return r.a.createElement("div",{className:"center"},r.a.createElement(E.a,{type:"TailSpin",color:"rgb(97, 185, 226)",height:100,width:100,timeout:3e3}))},k=function(e){var t=e.weatherData,a=e.scaleSwitch,n=e.units,i=e.loading;console.log(i);var c,s=t.emoji+" ";c=t.name.length>0?"reveal":"hide";var o="contentcontainer ".concat(c);return r.a.createElement("div",{className:o,id:"weathercontainer"},i?r.a.createElement(y,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"location"},r.a.createElement("p",{id:"main"},t.name,", ",t.country)),r.a.createElement(v,{weatherData:t,units:n,scaleSwitch:a}),r.a.createElement("div",{id:"emoji"},r.a.createElement("p",null,s),r.a.createElement("p",null,s),r.a.createElement("p",null,s),r.a.createElement("p",null,s),r.a.createElement("p",null,s)),r.a.createElement("div",{className:"weatherdiv",id:"descriptiondiv"},r.a.createElement("p",{className:"weatherlabel"},"Description: "),r.a.createElement("p",{id:"description"},t.description)),r.a.createElement("div",{className:"weatherdiv",id:"humiditydiv"},r.a.createElement("p",{className:"weatherlabel"},"Humidity: "),r.a.createElement("p",{id:"humidity"},t.humidity,"%")),r.a.createElement(f,{weatherData:t,units:n})))},S=function(e){var t,a=e.haiku,n=e.loading;t=a.text.length>0?"reveal":"hide";var i=a.text.map((function(e,t){return r.a.createElement("p",{key:t},e)}));return r.a.createElement("div",{className:"contentcontainer",id:"haikucontainer"},n?r.a.createElement(y,null):a.text.length?r.a.createElement("div",{className:t,id:"bonushaiku"},r.a.createElement("div",{id:"haikutext"},i),r.a.createElement("div",{id:"haikumetadata"},r.a.createElement("p",{id:"haikuauthoranddate"},a.author,", ",a.date),r.a.createElement("p",null,r.a.createElement("i",null,"via the"," ",r.a.createElement("a",{href:"https://www.tempslibres.org/tl/en/dbhk00.html"},"tempslibres haiku database"))))):"")},x=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={weatherData:{name:"",country:"",main:"",description:"",temp:"",humidity:"",windspeed:"",emoji:""},units:"metric",haiku:{text:[],author:"",date:""},errormessage:"",dataLoading:!1,haikuLoading:!1},e.handleSubmit=function(){var t=Object(l.a)(o.a.mark((function t(a){var n,r,i,c,s,l,u,m,d,h,w;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({dataLoading:!0,haikuLoading:!0}),r=(n=a).city,i=n.country,c=n.lat,s=n.long,console.log("handlesubmit"),console.log(a),a=Object.values(a),t.prev=5,!c||!s){t.next=12;break}return t.next=9,fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(c,"&lon=").concat(s,"&units=").concat(e.state.units,"&appid=").concat(p.a));case 9:l=t.sent,t.next=21;break;case 12:if(i){t.next=18;break}return t.next=15,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(r,"&units=").concat(e.state.units,"&appid=").concat(p.a));case 15:l=t.sent,t.next=21;break;case 18:return t.next=20,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(r,",").concat(i,"&units=").concat(e.state.units,"&appid=").concat(p.a));case 20:l=t.sent;case 21:return t.next=23,l.json();case 23:u=t.sent,"metric"===e.state.units&&(u.wind.speed=18*u.wind.speed/5,m=!1,e.setState({errormessage:m})),t.next=34;break;case 27:return t.prev=27,t.t0=t.catch(5),console.log("Can't find that there city"),console.log(t.t0),m="City not found",e.setState({errormessage:m}),t.abrupt("return");case 34:d=b[u.weather[0].main],h=d.emoji,w=u.weather[0].description.charAt(0).toUpperCase()+u.weather[0].description.slice(1),e.setState({weatherData:{name:u.name,country:u.sys.country,main:u.weather[0].main,description:w,temp:u.main.temp,humidity:u.main.humidity,windspeed:u.wind.speed,emoji:h},dataLoading:!1}),e.getHaiku(u.weather[0].main);case 39:case"end":return t.stop()}}),t,null,[[5,27]])})));return function(e){return t.apply(this,arguments)}}(),e.scaleSwitch=function(){var t,a,n=e.state,r=n.weatherData;"metric"===n.units?(t=9*r.temp/5+32,r.temp=t,a=r.windspeed/1.609344,r.windspeed=a,e.setState({weatherData:r,units:"imperial"})):(t=5*(r.temp-32)/9,r.temp=t,a=1.609344*r.windspeed,r.windspeed=a,e.setState({weatherData:r,units:"metric"}))},e.getUserLocation=function(){navigator.geolocation.getCurrentPosition((function(t){var a={lat:t.coords.latitude,long:t.coords.longitude};e.handleSubmit(a)}))},e}return Object(m.a)(a,[{key:"getHaiku",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r,i,c,s,l,u,m,d,h,p,w,g,v,f,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=b[t]).subjects,n=a[Math.floor(Math.random()*a.length)],e.prev=3,e.next=6,fetch("https://cors-anywhere.herokuapp.com/https://www.tempslibres.org/tl/tlphp/dbhk02.php?mot=".concat(n,"&lg=e"),{mode:"cors"});case 6:return i=e.sent,e.next=9,i.text();case 9:r=e.sent,e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(3),console.log("P sure we didn't get the haiku"),console.log(e.t0),e.abrupt("return");case 17:c=/<div class[\s\S]*?<\/div>/g,s=r.match(c),l=s.length,u=s[Math.floor(Math.random()*l)],m=new DOMParser,d=m.parseFromString(u,"text/html"),(h=(h=(h=(h=(h=d.querySelector(".haiku")).innerHTML).replace("&lt","<")).replace("&gt",">")).split("<br>")).length>3&&h.splice(3),p=(p=d.querySelector(".dbhktlref")).textContent,w=p.match(/^.*(?= ,)/),g=p.replace(/(.*cco )(.*)/,"$2"),v=this.state,f=v.weatherData,j=v.units,this.setState({weatherData:f,units:j,haiku:{text:h,author:w,date:g},haikuLoading:!1});case 35:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.weatherData,a=e.units,n=e.haiku,i=e.errormessage,c=e.dataLoading,s=e.haikuLoading;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"searchcontainer"},r.a.createElement("input",{type:"button",onClick:this.getUserLocation,className:"searchbutton",id:"locationbutton",value:"Here"}),r.a.createElement(g,{errormessage:i,handleSubmit:this.handleSubmit})),r.a.createElement("div",{id:"displaycontainer"},r.a.createElement(k,{scaleSwitch:this.scaleSwitch,units:a,weatherData:t,loading:c}),r.a.createElement(S,{haiku:n,loading:s})),r.a.createElement("div",{id:"credit"},"Background image via ",r.a.createElement("a",{href:"https://www.reddit.com/user/Biode/"},"u/Biode")))}}]),a}(n.Component);c.a.render(r.a.createElement(x,null),document.getElementById("root"))},7:function(e){e.exports=JSON.parse('{"a":"019a5718a88fbad6d614090cf4f6d59d"}')},9:function(e){e.exports=JSON.parse('{"Thunderstorm":{"subjects":["thunderstorm","thunder","lightning","storm"],"emoji":"\u26c8\ufe0f"},"Drizzle":{"subjects":["drizzle"],"emoji":"\ud83c\udf26\ufe0f"},"Rain":{"subjects":["rain","downpour"],"emoji":"\ud83c\udf27\ufe0f"},"Snow":{"subjects":["snow","winter","blizzard"],"emoji":"\u2744\ufe0f"},"Mist":{"subjects":["mist"],"emoji":"\ud83c\udf2b\ufe0f"},"Smoke":{"subjects":["wildfire"],"emoji":"\ud83d\udeac"},"Haze":{"subjects":["haze"],"emoji":"\ud83c\udf2b\ufe0f"},"Dust":{"subjects":["dust"],"emoji":"\ud83d\udca8"},"Fog":{"subjects":["fog"],"emoji":"\ud83c\udf2b\ufe0f"},"Sand":{"subjects":["sand"],"emoji":"\u231b"},"Ash":{"subjects":["ash"],"emoji":"\ud83d\udca8"},"Squall":{"subjects":["storm"],"emoji":"\ud83c\udf29\ufe0f"},"Tornado":{"subjects":["tornado"],"emoji":"\ud83c\udf2a\ufe0f"},"Clear":{"subjects":["breeze","sun"],"emoji":"\u2600\ufe0f"},"Clouds":{"subjects":["cloud"],"emoji":"\u2601\ufe0f"}}')}},[[14,1,2]]]);
//# sourceMappingURL=main.7d4a5403.chunk.js.map